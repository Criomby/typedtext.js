var __awaiter=this&&this.__awaiter||function(a,b,c,d){function e(g){return g instanceof c?g:new c(function(h){h(g)})}return new (c||=Promise)(function(g,h){function m(f){try{k(d.next(f))}catch(l){h(l)}}function n(f){try{k(d["throw"](f))}catch(l){h(l)}}function k(f){f.done?g(f.value):e(f.value).then(m,n)}k((d=d.apply(a,b||[])).next())})},__classPrivateFieldGet=this&&this.__classPrivateFieldGet||function(a,b,c,d){if("a"===c&&!d)throw new TypeError("Private accessor was defined without a getter");if("function"===
typeof b?a!==b||!d:!b.has(a))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===c?d:"a"===c?d.call(a):d?d.value:b.get(a)},__classPrivateFieldSet=this&&this.__classPrivateFieldSet||function(a,b,c,d,e){if("m"===d)throw new TypeError("Private method is not writable");if("a"===d&&!e)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof b?a!==b||!e:!b.has(a))throw new TypeError("Cannot write private member to an object whose class did not declare it");
return"a"===d?e.call(a,c):e?e.value=c:b.set(a,c),c},_Typedtext_running;
const typedtextjsVersionId="0.1.34:122022",defaultOptions={elementSentenceId:"sentence",elementCursorId:"cursor",cursor:"|",cursorColor:"black",textColor:"black",permaBlink:!1,staticCursor:!1,blinkSpeed:.6,content:[{text:"This is Typedtext.js!",color:"black",cursor:"|",cursorColor:"blue",timeout:2E3}],delay:100,delayAfter:1500,deleteSpeed:100,printConfig:!1,varSpeed:!1,varSpeedPercentage:.5,typos:!1,typosProb:.1,underline:!1},contentObj={text:"default",color:"black",cursor:"|",cursorColor:"blue",
timeout:2E3};
class Typedtext{constructor(a={}){_Typedtext_running.set(this,!1);a=Object.assign(Object.assign({},defaultOptions),a);!0===a.printConfig&&this._printConfig(a);if(a.permaBlink&&a.staticCursor)throw"Typedtext.js: Cannot set both {permaBlink: true, staticCursor: true}. Select one.";this.elmSent=document.getElementById(a.elementSentenceId);this.elmCurs=document.getElementById(a.elementCursorId);this.cursor=a.cursor;this.cursorColor=a.cursorColor;this.textColor=a.textColor;this.permaBlink=a.permaBlink;
this.staticCursor=a.staticCursor;this.content=a.content;this.delay=a.delay;this.delayAfter=a.delayAfter;this.deleteSpeed=a.deleteSpeed;this.varSpeed=a.varSpeed;this.varSpeedPercentage=a.varSpeedPercentage;this.typos=a.typos;this.typosProb=a.typosProb;this.underline=a.underline;this.blink=`blink ${a.blinkSpeed}s linear infinite alternate`;this._setupElements(a)}static getVersion(){return typedtextjsVersionId}isRunning(){return __classPrivateFieldGet(this,_Typedtext_running,"f")}run(){return __awaiter(this,
void 0,void 0,function*(){__classPrivateFieldSet(this,_Typedtext_running,!0,"f");let a=0;for(;__classPrivateFieldGet(this,_Typedtext_running,"f");)yield this.type(this.content[a]),yield waitForMs(this.delayAfter),yield this.delete(),yield waitForMs(this.delayAfter),a++,a>=this.content.length&&(a=0)})}stop(){__classPrivateFieldSet(this,_Typedtext_running,!1,"f")}type(a){return __awaiter(this,void 0,void 0,function*(){const b=a.text;if("undefined"==b||""==b)throw"text has to be defined and cannot be empty";
"color"in a&&(this.elmSent.style.color=a.color);"cursor"in a&&(this.elmCurs.innerHTML=a.cursor);"cursorColor"in a&&(this.elmCurs.style.color=a.cursorColor);this.permaBlink||this._stopBlink();for(let c=0;c<b.length;c++)this.varSpeed?yield waitForVarMs(this.delay,this.varSpeedPercentage):yield waitForMs(this.delay),this.typos&&Math.random()<=this.typosProb&&(this.elmSent.append(getRandChar()),this.varSpeed?yield waitForVarMs(this.delay,this.varSpeedPercentage):yield waitForMs(this.delay),this.elmSent.innerHTML=
this.elmSent.innerHTML.slice(0,-1),this.varSpeed?yield waitForVarMs(this.delay,this.varSpeedPercentage):yield waitForMs(this.delay)),this.elmSent.append(b[c]);this.staticCursor||this._startBlink();"timeout"in a&&(yield waitForMs(a.timeout))})}delete(){return __awaiter(this,void 0,void 0,function*(){const a=this.elmSent.innerHTML.split("");for(this.permaBlink||this._stopBlink();0<a.length;)yield waitForMs(this.deleteSpeed),a.pop(),this.elmSent.innerHTML=a.join("");this.staticCursor||this._startBlink();
this._resetStyles()})}_printConfig(a){console.log(`- Typedtext.js ${typedtextjsVersionId} -\n\nconfig:`,a)}_setupElements(a){if(!this.elmSent||!this.elmCurs)throw`Typedtext.js: target element(s) not found;
                sentence: ${this.elmSent},
                cursor: ${this.elmCurs}`;this.elmSent.style.display="inline-block";this.elmSent.style.color=a.textColor;this.underline&&(this.elmSent.style.textDecoration="underline");this.elmCurs.style.display="inline-block";this.elmCurs.style.color=a.cursorColor;this.elmCurs.style.animation=this.blink;this.elmCurs.innerHTML=this.cursor}_startBlink(){this.elmCurs.style.animation=this.blink}_stopBlink(){this.elmCurs.style.animation=""}_resetStyles(){this.elmSent.style.color=this.textColor;this.elmCurs.innerHTML=
this.cursor;this.elmCurs.style.color=this.cursorColor}}_Typedtext_running=new WeakMap;function waitForMs(a){return new Promise(b=>setTimeout(b,a))}function waitForVarMs(a,b){b/=100;a=getRandInt(a*(1-b/2),a*(1+b));let c=10>a?10:a;return new Promise(d=>setTimeout(d,c))}function getRandInt(a,b){a=Math.ceil(a);b=Math.floor(b);return Math.floor(Math.random()*(b-a+1))+a}
function getRandChar(){return.5>Math.random()?"abcdefghijklmnopqrstuvwxyz"[Math.floor(26*Math.random())].toUpperCase():"abcdefghijklmnopqrstuvwxyz"[Math.floor(26*Math.random())]}let cssStyle=document.createElement("style");cssStyle.innerHTML="@keyframes blink {0% {opacity: 1;} 40% {opacity: 1;} 60% {opacity: 0;} 100% {opacity: 0;}}";document.head.appendChild(cssStyle);
