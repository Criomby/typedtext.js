var __awaiter=this&&this.__awaiter||function(a,b,c,d){function l(f){return f instanceof c?f:new c(function(g){g(f)})}return new (c||=Promise)(function(f,g){function m(e){try{h(d.next(e))}catch(k){g(k)}}function n(e){try{h(d["throw"](e))}catch(k){g(k)}}function h(e){e.done?f(e.value):l(e.value).then(m,n)}h((d=d.apply(a,b||[])).next())})};
const typedtextjsVersionId="0.1.33:122022",defaultOptions={elementSentenceId:"sentence",elementCursorId:"cursor",cursor:"|",cursorColor:"black",textColor:"black",permaBlink:!1,staticCursor:!1,blinkSpeed:.6,content:[{text:"This is Typedtext.js!",color:"black",cursor:"|",cursorColor:"blue",timeout:2E3}],delay:100,delayAfter:1500,deleteSpeed:100,printConfig:!1,varSpeed:!1,varSpeedP:50,underline:!1},contentObj={text:"default",color:"black",cursor:"|",cursorColor:"blue",timeout:2E3};
class Typedtext{constructor(a={}){this.running=!1;a=Object.assign(Object.assign({},defaultOptions),a);!0===a.printConfig&&this._printConfig(a);if(a.permaBlink&&a.staticCursor)throw"Typedtext.js: Cannot set both {permaBlink: true, staticCursor: true}. Select one.";this.elmSent=document.getElementById(a.elementSentenceId);this.elmCurs=document.getElementById(a.elementCursorId);this.cursor=a.cursor;this.cursorColor=a.cursorColor;this.textColor=a.textColor;this.permaBlink=a.permaBlink;this.staticCursor=
a.staticCursor;this.content=a.content;this.delay=a.delay;this.delayAfter=a.delayAfter;this.deleteSpeed=a.deleteSpeed;this.varSpeed=a.varSpeed;this.varSpeedP=a.varSpeedP;this.underline=a.underline;this.blink=`blink ${a.blinkSpeed}s linear infinite alternate`;this._setupElements(a)}static getVersion(){return typedtextjsVersionId}run(){return __awaiter(this,void 0,void 0,function*(){this.running=!0;let a=0;for(;this.running;)yield this.type(this.content[a]),yield waitForMs(this.delayAfter),yield this.delete(),
yield waitForMs(this.delayAfter),a++,a>=this.content.length&&(a=0)})}stop(){this.running=!1}type(a){return __awaiter(this,void 0,void 0,function*(){const b=a.text;"color"in a&&(this.elmSent.style.color=a.color);"cursor"in a&&(this.elmCurs.innerHTML=a.cursor);"cursorColor"in a&&(this.elmCurs.style.color=a.cursorColor);this.permaBlink||this._stopBlink();for(let d=0;d<b.length;d++){if(this.varSpeed){var c=this.varSpeedP/100;c=getRandInt(this.delay*(1-c/2),this.delay*(1+c));yield waitForMs(10>c?10:c)}else yield waitForMs(this.delay);
this.elmSent.append(b[d])}this.staticCursor||this._startBlink();"timeout"in a&&(yield waitForMs(a.timeout))})}delete(){return __awaiter(this,void 0,void 0,function*(){const a=this.elmSent.innerHTML.split("");for(this.permaBlink||this._stopBlink();0<a.length;)yield waitForMs(this.deleteSpeed),a.pop(),this.elmSent.innerHTML=a.join("");this.staticCursor||this._startBlink();this._resetStyles()})}_printConfig(a){console.log(`- Typedtext.js ${typedtextjsVersionId} -\n\nconfig:`,a)}_setupElements(a){if(!this.elmSent||
!this.elmCurs)throw`Typedtext.js: target element(s) not found;
                sentence: ${this.elmSent},
                cursor: ${this.elmCurs}`;this.elmSent.style.display="inline-block";this.elmSent.style.color=a.textColor;this.underline&&(this.elmSent.style.textDecoration="underline");this.elmCurs.style.display="inline-block";this.elmCurs.style.color=a.cursorColor;this.elmCurs.style.animation=this.blink;this.elmCurs.innerHTML=this.cursor}_startBlink(){this.elmCurs.style.animation=this.blink}_stopBlink(){this.elmCurs.style.animation=""}_resetStyles(){this.elmSent.style.color=this.textColor;this.elmCurs.innerHTML=
this.cursor;this.elmCurs.style.color=this.cursorColor}}function waitForMs(a){return new Promise(b=>setTimeout(b,a))}function getRandInt(a,b){a=Math.ceil(a);b=Math.floor(b);return Math.floor(Math.random()*(b-a+1))+a}let cssStyle=document.createElement("style");cssStyle.innerHTML="@keyframes blink {0% {opacity: 1;} 40% {opacity: 1;} 60% {opacity: 0;} 100% {opacity: 0;}}";document.head.appendChild(cssStyle);
